<button class="btn btn-primary"
        type="button"
        [disabled]="isPageInUpdateState"
        data-toggle="collapse"
        data-target="#collapseInputForm"
        aria-expanded="false"
        aria-controls="collapseInputForm">
  {{isPageInUpdateState==true?'Update ':'Add '+pageTitle}}
</button>

<div style="margin-top: 1%" [hidden]="hideInputForm">
  <form class="collapse"
        id="collapseInputForm"
        data-toggle="collapse"
        [formGroup]="entryForm">

    <div class="col-sm-6" style="padding-left: 0%;">
      <div class="card">
        <div class="card-header text-center">
          <strong>Customer Payment</strong>
        </div>
        <div class="card-body">

          <div class="form-group required row">
            <label for="invoiceNo" class="col-sm-4 required-label">Invoice No:</label>
            <div class="col-sm-8">
              <input
                id="invoiceNo"
                class="form-control"
                name="invoiceNo"
                [attr.disabled]="true"
                type="text"
                [(ngModel)]="customerPaymentModel.invoiceNo"
                formControlName="invoiceNo">
            </div>
          </div>

          <div class="form-group required row">
            <label for="customerName" class="col-sm-4 required-label">Name:</label>
            <div class="col-sm-8">
              <input
                id="customerName"
                class="form-control"
                name="customerName"
                autocomplete="off"
                [attr.disabled]="true"
                type="text"
                [(ngModel)]="customerPaymentModel.customerName"
                formControlName="customerName">
            </div>
          </div>

          <div class="form-group row">
            <label for="grandTotal" class="col-sm-4">Grand Total:</label>
            <div class="col-sm-8">
              <input
                id="grandTotal"
                class="form-control"
                name="grandTotal"
                onkeypress="return (event.charCode > 31) && (event.charCode >= 48 && event.charCode <= 57)"
                [attr.disabled]="true"
                type="text"
                [(ngModel)]="customerPaymentModel.grandTotal"
                formControlName="grandTotal">
            </div>
          </div>

          <div class="form-group row">
            <label for="dueAmount" class="col-sm-4">Due Amount:</label>
            <div class="col-sm-8">
              <input
                id="dueAmount"
                class="form-control"
                name="dueAmount"
                [attr.disabled]="true"
                onkeypress="return (event.charCode > 31) && (event.charCode >= 48 && event.charCode <= 57)"
                type="text"
                [(ngModel)]="customerPaymentModel.dueAmount"
                formControlName="dueAmount">
            </div>
          </div>

          <div class="form-group row">
            <label for="paidAmount" class="col-sm-4 lb-sm">Paid Amount:</label>
            <div class="col-sm-8">
              <input
                id="paidAmount"
                class="form-control"
                name="paidAmount"
                onkeypress="return (event.charCode > 31) && (event.charCode >= 48 && event.charCode <= 57)"
                type="text"
                [(ngModel)]="customerPaymentModel.paidAmount"
                formControlName="paidAmount">
              <div *ngIf="formSubmitted && entryForm.controls['paidAmount'].hasError('required')" class="custom-invalid-feedback">
                Enter Paid Amount
              </div>
            </div>
          </div>

          <div class="form-group row required">
            <label for="paymentDate" class="col-sm-4 lb-sm">Payment Date</label>
            <div class="col-sm-8">
              <div class="input-group datepicker-input">
                <input type="text"
                       name="paymentDate"
                       id="paymentDate"
                       [ngClass]="{ 'is-invalid': formSubmitted && entryForm.controls['paymentDate']?.hasError('required') }"
                       #paymentDate="bsDatepicker"
                       [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY' }"
                       placeholder="Select a date"
                       formControlName="paymentDate"
                       [(ngModel)]="customerPaymentModel.paymentDate"
                       class="form-control"
                       bsDatepicker>
                <button class="input-group-addon" (click)="paymentDate.toggle()" type="button">
                  <span class="fa fa-calendar"></span>
                </button>
                <div *ngIf="formSubmitted && entryForm.controls['paymentDate'].hasError('required')"
                     class="custom-invalid-feedback">
                  Select Expiry Date
                </div>
              </div>
            </div>
          </div>


        </div>
        <div class="card-footer">
          <div class="row">
            <div class="col-sm-12">

              <button
                      type="button"
                      (click)="onClickClickConfirmPayment()"
                      class="btn btn-success pull-right">
                Confirm Payment
              </button>


              <button type="button"
                      (click)="onClickCancel()"
                      class="btn btn-danger pull-left">
                Cancel
              </button>
            </div>

          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<div class="">

  <div class="card" style="margin-top: 1%">
    <div class="card-header">
      <strong>{{pageTitle}} List</strong>
    </div>
    <div class="card-body">
      <table datatable [dtOptions]="dataTableOptions" class="table-hover table table-sm table-striped table-bordered nowrap"
             style="width: 100%">
        <thead>
        <tr>
          <!-- <th>ID</th>-->
          <th style="width: 20%">Invoice No</th>
          <th style="width: 10%">Customer</th>
          <th style="width: 20%">Total</th>
          <th style="width: 30%">Paid Amount</th>
          <th style="width: 30%">Due Amount</th>
          <th style="width: 30%">Invoice Date</th>
          <th style="width: 10%">Action</th>
        </tr>
        </thead>
        <tbody *ngIf="customerPaymentModelList?.length != 0">
        <tr *ngFor="let item of customerPaymentModelList">
          <td>{{item.invoiceNo }}</td>
          <td class="ellipsis">{{item.customerName}}</td>
          <td>{{item.grandTotal}}</td>
          <td>{{item.paidAmount}}</td>
          <td>{{item.dueAmount}}</td>
          <td>{{item.invoiceDate | date: 'dd/MM/yyyy'}}</td>
          <td>
            <button type="button" class="btn btn-secondary" (click)="onClickPayment(item.id)" style="margin-left: 1%">
              Payment
            </button>
          </td>


        </tr>
        </tbody>
        <tbody *ngIf="customerPaymentModelList?.length == 0">
        <tr>
          <td colspan="7" class="no-data-available">No data!</td>
        </tr>
        <tbody>
      </table>


    </div>
    <div class="">

    </div>
  </div>

</div>
